const e=[[52,"Chinese Cymbal"],[51,"Ride Cymbal 1"],[50,"High Tom"],[49,"Crash Cymbal 1"],[48,"High Mid Tom"],[47,"Low-Mid Tom"],[46,"Open Hi-hat"],[45,"Low Tom"],[44,"Pedal Hi-hat"],[43,"High Floor Tom"],[42,"Closed Hi-hat"],[41,"Low Floor Tom"],[40,"Electric Snare"],[39,"Hand Clap"],[38,"Acoustic Snare"],[37,"Side Stick"],[36,"Bass Drum 1"]],t=e.map(e=>e[0]),l=e.map(e=>e[1]),i=Math.floor((window.innerHeight-20)/e.length);window.addEventListener("load",function(){let o=document.createElement("canvas");o.width=8*i*20,o.height=i*e.length,document.body.appendChild(o);let r=o.getContext("2d");if(!r)return;document.querySelector("#log");let n=document.querySelector("#dl-btn"),a=document.querySelector("#clear-btn");class d{constructor(e,t){this.x=e,this.y=t}}let c=()=>{localStorage.setItem("RC10R_DRUMS_NOTES",JSON.stringify(f))},f=JSON.parse(localStorage.getItem("RC10R_DRUMS_NOTES")||"[]"),h=!1,g=new d(0,0),s=e=>{let t=e.target.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}};o.addEventListener("mousedown",e=>{let t=s(e);g=new d(Math.floor(t.x/i),Math.floor(t.y/i)),h||(h=!0)}),o.addEventListener("mousemove",e=>{if(!h)return}),o.addEventListener("mouseup",e=>{let t=s(e),l=Math.floor(t.y/i),o=Math.floor(t.x/i);if(g.x===o&&g.y===l){let e=f.findIndex(e=>e.x===o&&e.y===l);e>=0?f.splice(e,1):f.push(new d(o,l)),c()}h&&(h=!1)}),a.addEventListener("click",()=>{f=[],c()}),n.addEventListener("click",()=>{let e=new Midi,l=e.addTrack();f.forEach(e=>{l.addNote({midi:t[e.y],time:.25*e.x,duration:.25})});let i=new Blob([e.toArray()],{type:"audio/midi"}),o=URL.createObjectURL(i),r=document.createElement("a");r.href=o,r.download="download.mid",r.click(),URL.revokeObjectURL(o)});let y=()=>{r.fillStyle="#000000",r.fillRect(0,0,o.width,o.height),r.fillStyle="rgba(255, 0, 0, 0.3)",r.fillRect(0,0,8*i*1,o.height),r.fillStyle="rgba(255, 255, 0, 0.3)",r.fillRect(8*i,0,8*i*8,o.height),r.fillStyle="rgba(0, 255, 0, 0.3)",r.fillRect(8*i*9,0,8*i*1,o.height),r.fillStyle="rgba(0, 255, 255, 0.3)",r.fillRect(8*i*10,0,8*i*8,o.height),r.fillStyle="rgba(0, 0, 255, 0.3)",r.fillRect(8*i*18,0,8*i*1,o.height),r.fillStyle="rgba(255, 0, 255, 0.3)",r.fillRect(8*i*19,0,8*i*1,o.height);for(let t=0;t<160;t+=8)r.fillStyle="rgba(255, 255, 255, 0.1)",r.fillRect(t*i,(e.length-1)*i,i,i);for(let t=4;t<160;t+=8)r.fillStyle="rgba(255, 255, 255, 0.1)",r.fillRect(t*i,(e.length-3)*i,i,i);for(let e=0;e<160;e+=1)r.fillStyle=e%8==0?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",r.fillRect(e*i,0,1,o.height);for(let e=0;e<l.length;e+=1)r.fillStyle="#333",r.fillRect(0,e*i,o.width,1);for(let e=0;e<160;e+=16)for(let t=0;t<l.length;t+=1)r.fillStyle="rgba(255, 255, 255, 0.2)",r.font=`${i}px sans-serif`,r.textBaseline="top",r.fillText(l[t],e*i,t*i);f.forEach(e=>{r.fillStyle="#fff",r.fillRect(e.x*i,e.y*i,i,i)})};y(),setInterval(()=>y(),125)});
//# sourceMappingURL=rc10r_drums_maker.f10adef7.js.map
