function main(){let e=document.createElement("canvas");e.width=600,e.height=600,document.body.appendChild(e);let t=e.getContext("2d");if(!t)return;class l{constructor(e,t){this.x=e,this.y=t}}let n=!1,i=[],h=[],o=e=>{let t=e.target.getBoundingClientRect();return new l(e.clientX-t.left,e.clientY-t.top)};e.addEventListener("contextmenu",e=>{e.preventDefault(),h=[],i=[]}),e.addEventListener("mousedown",e=>{if(n)return;n=!0;let t=o(e);h=[t,t],i.push([t,t])}),e.addEventListener("mousemove",e=>{if(!n)return;let t=o(e),l=h[h.length-1];Math.sqrt(Math.pow(t.y-l.y,2)+Math.pow(t.x-l.x,2))>=1&&h.push(t);let f=i[i.length-1];f.length>0&&(f[f.length-1],h.length>=5&&(h=[t],f.push(t)))}),e.addEventListener("mouseup",e=>{if(!n)return;n=!1;let t=o(e);if(h=[],i.length>0){let e=i[i.length-1];e.length>=3?(e[e.length-1].x=t.x,e[e.length-1].y=t.y):e.push(t)}});let f=()=>{t.fillStyle="#000000",t.fillRect(0,0,e.width,e.height),t.lineCap="round",t.lineJoin="round",t.strokeStyle="#ffffff",t.lineWidth=2,t.beginPath(),h.forEach((e,l)=>{0===l?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)}),t.stroke(),t.closePath();let l=0;i.forEach(e=>{e.forEach(e=>{t.fillStyle="#f00",t.fillRect(e.x-5,e.y-5,10,10),l++})}),t.fillStyle="#fff",t.fillText(`${l}`,10,10),t.strokeStyle="#fff",t.lineWidth=5,i.forEach(e=>{if(0!==e.length){if(t.beginPath(),t.moveTo(e[0].x,e[0].y),2===e.length)t.lineTo(e[1].x,e[1].y);else if(e.length>2){let l=[...e,e[e.length-1]];for(let e=1;e<l.length-2;e++){let n=l[e-1],i=l[e],h=l[e+1],o=l[e+2],f=i.x+(h.x-n.x)/6,r=i.y+(h.y-n.y)/6,a=h.x-(o.x-i.x)/6,s=h.y-(o.y-i.y)/6;t.bezierCurveTo(f,r,a,s,h.x,h.y)}}t.stroke(),t.closePath()}})};f(),setInterval(()=>f(),1e3/15)}window.addEventListener("load",main);
//# sourceMappingURL=bezier_curve_test.52c9827e.js.map
